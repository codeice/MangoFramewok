
<div class="row-fluid">
    <!--树形风格左半部分-->
    <div class="span3">
        <div class="widget-box">
            <div class="widget-header  header-color-light-blue">
                <h5>上海市</h5>
                <div class="widget-toolbar">
                    <a href="#" data-action="collapse">
                        <i class="1 icon-chevron-up bigger-125"></i>
                    </a>
                </div>
            </div>
            <div class="widget-body min-height-580">
                <div class="widget-main widget-main-header">
                    <div class="row-fluid">
                        <div class="span12 ">
                            <div class="widget-box transparent">
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div>
                                            <ul class="ztree" dir-tree="tree" tree-data="rootNodes" tree-config="treeConfig" click-node="clickNode" load-child-nodes="loadChildren" move-node="moveNode"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 树形风格右半部分-->
    <div class="span9">
        <!--详情模块-->
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-header  header-color-light-blue">
                        <h5>基本信息</h5>
                        <div class="widget-toolbar">
                            <a href="#" data-action="collapse">
                                <i class="1 icon-chevron-up bigger-125"></i>
                            </a>
                        </div>
                    </div>
                    <div class="widget-body">
                        <div class="widget-main widget-main-header">
                            <div>
                                <button class="btn btn-info btn-mini margin-right-5" ng-click="addRootNode()" data-toggle="modal" data-target="#addOrEditModal">
                                    <i class="icon-plus bigger-110"></i>
                                    添加根节点
                                </button>
                                <button class="btn btn-purple btn-mini margin-right-5" ng-click="addChild()" data-toggle="modal" data-target="#addOrEditModal">
                                    <i class="icon-plus bigger-110"></i>
                                    添加子节点
                                </button>
                                <button class="btn btn-primary btn-mini margin-right-5" ng-click="editNode()" data-toggle="modal" data-target="#addOrEditModal">
                                    <i class="icon-edit bigger-110"></i>
                                    编辑
                                </button>
                                <button class="btn btn-danger btn-mini" ng-click="deleteNode()">
                                    <i class="icon-trash bigger-110"></i>
                                    删除
                                </button>
                            </div>
                            <div class="profile-user-info profile-user-info-striped no-margin-left margin-top-10">
                                <div class="profile-info-row">
                                    <div class="profile-info-name"> 父节点Code </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.ParentCode"></span>
                                    </div>
                                </div>

                                <div class="profile-info-row">
                                    <div class="profile-info-name"> Code </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.Code"></span>
                                    </div>
                                </div>
                                <div class="profile-info-row">
                                    <div class="profile-info-name"> 名称 </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.Name"></span>
                                    </div>
                                </div>

                                <div class="profile-info-row">
                                    <div class="profile-info-name"> Url </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.Url"></span>
                                    </div>
                                </div>

                                <div class="profile-info-row">
                                    <div class="profile-info-name"> 数量 </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.DataCount"></span>
                                    </div>
                                </div>

                                <div class="profile-info-row">
                                    <div class="profile-info-name"> 创建人 </div>
                                    <div class="profile-info-value">
                                        <span class="ng-binding" ng-bind="nodeInfo.CreatorDisplayName"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--列表-->
        <div class="hr hr-18 dotted"></div>
        <div class="row-fluid">
            <div class="span12">
                <div class="table-header">
                    查询结果列表
                </div>
                <div id="sample-table-2_wrapper" class="dataTables_wrapper" role="grid">
                    <!--table action-->
                    <div class="row-fluid">
                        <div class="span12 op-group">
                            <div class="nav-search table-search" id="nav-search">
                                <form class="form-search ng-pristine ng-valid">
                                    <span class="input-icon">
                                        <input type="text" placeholder="输入名称" class="input-small nav-search-input ng-pristine ng-valid" id="nav-search-input" autocomplete="off" ng-keyup="doSearch();" ng-model="searchModel.Name">
                                        <i class="icon-search nav-search-icon"></i>
                                    </span>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- table-->
                    <table id="sample-table-2" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th class="center">序号</th>
                                <th class="center">
                                    操作
                                </th>
                                <th>名称</th>
                                <th>数量</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="data in results">
                                <td class="center">{{$index + 1}}</td>
                                <td class="center">
                                    <button class="btn btn-minier btn-purple" ng-click="goDetail(url)" title="详情">
                                        <i class="icon-eye-open bigger-110"></i>
                                    </button>
                                </td>
                                <td>{{data.Name}}</td>
                                <td>{{data.DataAccount}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div dir-page page-model="pageModel" page-change="changePage">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--新建 编辑节点Modal-->
<div id="addOrEditModal" class="modal hide" tabindex="-1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="blue bigger">{{modalTitle}}</h4>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" id="addOrEditForm" name="addOrEditForm">

            <input type="hidden" ng-model="node.Id" />
            <div class="control-group">
                <label class="control-label" for="Code">
                    <span class="require-tip">*</span>父节点Code
                </label>
                <div class="controls">
                    <input type="text" id="ParentCode" name="ParentCode" ng-model="node.ParentCode" readonly>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="Code">
                    <span class="require-tip">*</span>Code
                </label>
                <div class="controls">
                    <input type="text" id="Code" name="Code" ng-model="node.Code" ng-maxlength="30" required ng-blur="checkCodeIsExsit()">
                    <span class="custom-error" ng-show="addOrEditForm.Code.$dirty||addOrEditForm.isSubmitted">
                        <span ng-show="isCodeExist&& node.Code!=null">Code重复</span>
                        <span ng-show="addOrEditForm.Code.$error.required">Code不能为空</span>
                        <span ng-show="addOrEditForm.Code.$error.maxlength">最大长度为30字符</span>
                    </span>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="Name">
                    名称
                </label>
                <div class="controls">
                    <input type="text" id="Name" name="Name" ng-model="node.Name" ng-maxlength="30">
                    <span class="custom-error" ng-show="addOrEditForm.Name.$dirty||addOrEditForm.isSubmitted">
                        <span ng-show="addOrEditForm.Code.$error.maxlength">最大长度为30字符</span>
                    </span>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="Url">
                    Url
                </label>
                <div class="controls">
                    <input type="text" id="Url" name="Url" ng-model="node.Url" ng-maxlength="200">
                    <span class="custom-error" ng-show="addOrEditForm.Url.$dirty||addOrEditForm.isSubmitted">
                        <span ng-show="addOrEditForm.Url.$error.maxlength">最大长度为200个字符</span>
                    </span>
                </div>
            </div>

        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-small btn-danger" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-small  btn-primary" ng-click="save()">保存</button>
    </div>
</div>