{"version":3,"sources":["demo/userService.js","demo/userCtrl.js","common/services.js","common/directives.js","common/config.js","common/app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.bundle.js","sourcesContent":["function demoServiceProxy(service) {\r\n\r\n    //服务调用示例\r\n    this.getAll = function () {\r\n        return service.call(\"Competitions/QueryOptions\", {}, \"get\");\r\n    }\r\n\r\n    //-----demo示例\r\n    var list = [{\r\n        id: 0,\r\n        name: 'Ben Sparrow',\r\n        email:'benSparrow@126.com',\r\n        lastText: 'You on your way?',\r\n        face: 'img/ben.png'\r\n    }, {\r\n        id: 1,\r\n        name: 'Max Lynx',\r\n        email: 'MaxLynx@126.com',\r\n        lastText: 'Hey, it\\'s me',\r\n        face: 'img/max.png'\r\n    }, {\r\n        id: 2,\r\n        name: 'Adam Bradleyson',\r\n        email: 'Bradleyson@126.com',\r\n        lastText: 'I should buy a boat',\r\n        face: 'img/adam.jpg'\r\n    }, {\r\n        id: 3,\r\n        name: 'Perry Governor',\r\n        email: 'Governor@126.com',\r\n        lastText: 'Look at my mukluks!',\r\n        face: 'img/perry.png'\r\n    }, {\r\n        id: 4,\r\n        name: 'Mike Harrington',\r\n        email: 'Harrington@126.com',\r\n        lastText: 'This is wicked good ice cream.',\r\n        face: 'img/mike.png'\r\n    }];\r\n\r\n    this.getList = function () {\r\n        return list;\r\n    },\r\n\r\n    this.remove = function (item) {\r\n        list.splice(list.indexOf(item), 1);\r\n    },\r\n\r\n    this.getDetail = function (id) {\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (list[i].id == id) {\r\n                return list[i];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\n//----list service\r\nserviceModule.factory('demoService', ['service', function (service) {\r\n    return new demoServiceProxy(service);\r\n}]);","(function () {\r\n    'use strict';\r\n\r\n    //----用户列表\r\n    ctrlModule.controller('userCtrl', ['$scope', 'demoService', '$ionicModal', function ($scope, demoService, $ionicModal) {\r\n        /*        //----http service demo\r\n                demoService.getAll().$promise.then(function (response) {\r\n                    $scope.list = response.data.Data;\r\n                    console.log(\"$scope.list=\", $scope.list);\r\n                });*/\r\n        console.log(\"hello ionic\");\r\n\r\n        // Some fake testing data\r\n        $scope.persons = demoService.getList();\r\n\r\n        //读取缓存模板\r\n        $ionicModal.fromTemplateUrl('modal.html', {\r\n            scope: $scope\r\n        }).then(function (modal) {\r\n            $scope.modal = modal;\r\n        });\r\n\r\n        $scope.openModal = function (item) {\r\n            $scope.user = angular.copy(item);\r\n            $scope.modal.show();\r\n        };\r\n\r\n        //----删除\r\n        $scope.remove = function (item) {\r\n            demoService.remove(item);\r\n        }\r\n\r\n    }]);\r\n\r\n    //----用户详情\r\n    ctrlModule.controller('userDetailCtrl', ['$scope', '$stateParams', 'demoService', function ($scope, $stateParams, demoService) {\r\n        var userId = $stateParams.userId;\r\n        $scope.user = demoService.getDetail(userId);\r\n    }]);\r\n\r\n})();","/**\r\n * \r\n * @authors Your Name (you@example.org)\r\n * @date    2016-05-06 16:41:43\r\n * @version $Id$\r\n */\r\n//scopeService\r\nservice_v = '1.0.0';\r\nserviceModule.service('scopeService', function () {\r\n    return {\r\n        safeApply: function ($scope, fn) {\r\n            var phase = $scope.$root.$$phase;\r\n            if (phase == '$apply' || phase == '$digest') {\r\n                if (fn && typeof fn === 'function') {\r\n                    fn();\r\n                }\r\n            } else {\r\n                if (fn && typeof fn === 'function') {\r\n                    $scope.$apply(fn);\r\n                } else {\r\n                    $scope.$apply();\r\n                }\r\n            }\r\n        }\r\n    };\r\n});\r\n\r\n//-----UI工具服务\r\nserviceModule.service('uiKit', ['$rootScope', '$q', '$ionicLoading', function ($rootScope, $q, $ionicLoading) {\r\n    var blockCount = 0;\r\n    var service = {\r\n        blockUI: function () {\r\n            blockCount++;\r\n            $ionicLoading.show({\r\n                template: '加载中',\r\n                noBackdrop: false\r\n            });\r\n        },\r\n        unblockUI: function () {\r\n            blockCount--;\r\n            if (blockCount <= 0) {\r\n                $ionicLoading.hide();\r\n            }\r\n        },\r\n    };\r\n    return service;\r\n}]);\r\n\r\nserviceModule.factory('httpProxy', ['$http', function ($http) {\r\n    var service = {\r\n        call: function (route, param, methodType, userToken) {\r\n            var result = [];\r\n            result.$promise = null;\r\n            var apihost = \"\";\r\n            if (route.indexOf('http') >= 0) {\r\n                apihost = route;\r\n            } else {\r\n                apihost = appConfig.apiServer + route;\r\n            }\r\n\r\n            //todo request with usertoken\r\n            /*   //要求登录(token已参数形式传递 )\r\n               if (userToken != null && userToken !== \"\") {\r\n                   apihost = apihost + \"?token=\" + userToken;\r\n               }\r\n               //---token 通过header传递\r\n               $http.defaults.headers.common.Authorization = 'Bearer ' + userToken;*/\r\n\r\n            if (methodType == undefined)\r\n                methodType = 'post';\r\n            methodType = methodType.toLowerCase();\r\n            if (methodType == 'post') {\r\n                result.$promise = $http.post(apihost, param);\r\n            }\r\n            if (methodType === 'get') {\r\n                var queryParams = '?';\r\n                if (apihost.indexOf('?') >= 0) {\r\n                    queryParams = \"&\";\r\n                }\r\n                var paramArray = [];\r\n                for (var p in param) {\r\n                    var paramStr = p + '=' + escape(param[p]);\r\n                    paramArray.push(paramStr);\r\n                }\r\n                queryParams += paramArray.join('&');\r\n                if (queryParams === '&' || queryParams === '?') {\r\n                    queryParams = '';\r\n                }\r\n                result.$promise = $http.get(apihost + queryParams);\r\n            }\r\n            if (methodType === 'delete') {\r\n                result.$promise = $http.delete(apihost, { params: param });\r\n            }\r\n            if (methodType === 'put') {\r\n                result.$promise = $http.put(apihost, param);\r\n            }\r\n            if (methodType === 'jsonp') {\r\n                apihost = apihost + \"?callback=JSON_CALLBACK\";\r\n                result.$promise = $http.jsonp(apihost, { params: param });\r\n            }\r\n            if (result.$promise != null) {\r\n                result.$promise.then(function (response) {\r\n                    angular.extend(result, response.data);\r\n                }, function (response) {\r\n                    if (response.status == 401) {\r\n                        /*  var m_oauthService = new oauthService();\r\n                          m_oauthService.goToAuthorize();*/\r\n                        //----todo goTologin\r\n                    }\r\n                });\r\n                result.$promise.refresh = function (newParam) {\r\n                    result.$promise.then(function () {\r\n                        call(action, newParam).$promise.then(function (response) {\r\n                            angular.extend(result, response.data);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    return service;\r\n}]);\r\n\r\n//api http service\r\nserviceModule.factory('service', ['httpProxy', 'uiKit', function (httpProxy, uiKit) {\r\n    var count = 0;\r\n    var blocked = false;\r\n    var service = {\r\n        //----带loading call\r\n        \"call\": function (route, param, methodType) {\r\n            count++;\r\n            if (!blocked) {\r\n                blocked = true;\r\n                uiKit.blockUI();\r\n            }\r\n            var result = httpProxy.call(route, param, methodType);\r\n            result.$promise.finally(function () {\r\n                count--;\r\n                if (count <= 0) {\r\n                    setTimeout(function () {\r\n                        if (count <= 0) {\r\n                            blocked = false;\r\n                            uiKit.unblockUI();\r\n                        }\r\n                    }, 300);\r\n                }\r\n            });\r\n            return result;\r\n        },\r\n\r\n        //----无loading call\r\n        'backgroundCall': function (route, param, methodType) {\r\n            return httpProxy.call(route, param, methodType);\r\n        }\r\n    };\r\n    return service;\r\n}]);\r\n","/*dirModule.directive(\r\n          \"preLoading\",\r\n          function ($animate) {\r\n              return ({\r\n                  link: link,\r\n                  restrict: \"C\"\r\n              });\r\n              function link(scope, element, attributes) {\r\n                  $animate.leave(element.children().eq(1)).then(\r\n                      function cleanupAfterAnimation() {\r\n                          element.remove();\r\n                          scope = element = attributes = null;\r\n                      }\r\n                  );\r\n              }\r\n          }\r\n      );*/","//---配置文件\r\nversion_v = 1.0;\r\nvar appConfig = {\r\n    apiServer: location.protocol + \"//\" + location.host + '/CE.WebApi/',\r\n    apiBatchServer: this.apiServer + '/batch/'\r\n}","// Ionic Starter App\r\n\r\n// angular.module is a global place for creating, registering and retrieving Angular modules\r\n// 'starter' is the name of this angular module example (also set in a <body> attribute in index.html)\r\n// the 2nd parameter is an array of 'requires'\r\n'use strict';\r\nvar ctrlModule = angular.module('starter.controllers', ['ionic']);\r\nvar serviceModule = angular.module('starter.services', []);\r\nvar filterModule = angular.module('starter.filters', []);\r\nvar dirModule = angular.module('starter.directives', []);\r\n\r\nvar app = angular.module('starter', ['ionic', 'starter.controllers', 'starter.services', 'starter.filters', 'starter.directives']);\r\n\r\nsetTimeout(function asyncBootstrap() {\r\n    angular.bootstrap(document, [\"starter\"]);\r\n    //---�𶯳ɹ��Ƴ��𶯻���\r\n    angular.element(document.querySelector('.splash-screen')).addClass('flipOutY');\r\n}, 2000);\r\n\r\napp.run(function ($ionicPlatform) {\r\n    $ionicPlatform.ready(function () {\r\n        // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\r\n        // for form inputs)\r\n        if (window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard) {\r\n            cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\r\n            cordova.plugins.Keyboard.disableScroll(true);\r\n\r\n        }\r\n        if (window.StatusBar) {\r\n            // org.apache.cordova.statusbar required\r\n            StatusBar.styleDefault();\r\n        }\r\n    });\r\n});\r\n\r\n//----·������\r\napp.config(function ($stateProvider, $urlRouterProvider) {\r\n\r\n    $stateProvider\r\n        .state('tab', {\r\n            url: '/tab',\r\n            //ֻ�ܹ����̳У����ܹ�ֱ���л�����״̬\r\n            abstract: true,\r\n            templateUrl: 'js/navbar/tabs.html'\r\n        })\r\n        //----userҳ��\r\n        .state('tab.user', {\r\n            url: '/users',\r\n            views: {\r\n                'tab-users': {\r\n                    templateUrl: 'js/demo/user-list.html',\r\n                    controller: 'userCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('tab.user-detail', {\r\n            url: '/users/:userId',\r\n            views: {\r\n                'tab-users': {\r\n                    templateUrl: 'js/demo/user-detail.html',\r\n                    controller: 'userDetailCtrl'\r\n                }\r\n            }\r\n        });\r\n\r\n    $urlRouterProvider.otherwise(\"/tab/users\");\r\n});\r\n"],"sourceRoot":"/source/"}