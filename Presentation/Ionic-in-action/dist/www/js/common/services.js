service_v="1.0.0",serviceModule.service("scopeService",function(){return{safeApply:function(e,o){var n=e.$root.$$phase;"$apply"==n||"$digest"==n?o&&"function"==typeof o&&o():o&&"function"==typeof o?e.$apply(o):e.$apply()}}}),serviceModule.service("uiKit",["$rootScope","$q","$ionicLoading",function(e,o,n){var t=0,r={blockUI:function(){t++,n.show({template:"加载中",noBackdrop:!1})},unblockUI:function(){t--,0>=t&&n.hide()}};return r}]),serviceModule.factory("httpProxy",["$http",function(e){var o={call:function(o,n,t,r){var i=[];i.$promise=null;var a="";if(a=o.indexOf("http")>=0?o:appConfig.apiServer+o,void 0==t&&(t="post"),t=t.toLowerCase(),"post"==t&&(i.$promise=e.post(a,n)),"get"===t){var c="?";a.indexOf("?")>=0&&(c="&");var p=[];for(var u in n){var s=u+"="+escape(n[u]);p.push(s)}c+=p.join("&"),"&"!==c&&"?"!==c||(c=""),i.$promise=e.get(a+c)}return"delete"===t&&(i.$promise=e["delete"](a,{params:n})),"put"===t&&(i.$promise=e.put(a,n)),"jsonp"===t&&(a+="?callback=JSON_CALLBACK",i.$promise=e.jsonp(a,{params:n})),null!=i.$promise&&(i.$promise.then(function(e){angular.extend(i,e.data)},function(e){401==e.status}),i.$promise.refresh=function(e){i.$promise.then(function(){call(action,e).$promise.then(function(e){angular.extend(i,e.data)})})}),i}};return o}]),serviceModule.factory("service",["httpProxy","uiKit",function(e,o){var n=0,t=!1,r={call:function(r,i,a){n++,t||(t=!0,o.blockUI());var c=e.call(r,i,a);return c.$promise["finally"](function(){n--,0>=n&&setTimeout(function(){0>=n&&(t=!1,o.unblockUI())},300)}),c},backgroundCall:function(o,n,t){return e.call(o,n,t)}};return r}]);